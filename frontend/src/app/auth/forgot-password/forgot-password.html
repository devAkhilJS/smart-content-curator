<div class="forgot-password-container">
  <form [formGroup]="forgotForm" (ngSubmit)="submit()" *ngIf="!emailSent">
    <div class="header">
      <h2>Reset Your Password</h2>
      <p class="subtitle">Enter your email address and we'll send you a link to reset your password.</p>
    </div>
    <div class="form-group">
      <label>Email Address</label>
      <input 
        formControlName="email" 
        type="email" 
        placeholder="Enter your email address"
        [class.error]="forgotForm.get('email')?.invalid && forgotForm.get('email')?.touched"
      />
      <div *ngIf="forgotForm.get('email')?.invalid && forgotForm.get('email')?.touched" class="error-message">
        <span *ngIf="forgotForm.get('email')?.errors?.['required']">Email is required</span>
        <span *ngIf="forgotForm.get('email')?.errors?.['email']">Please enter a valid email address</span>
      </div>
    </div>
    <button type="submit" [disabled]="loading || forgotForm.invalid" class="reset-btn">
      <span *ngIf="loading" class="spinner"></span>
      {{ loading ? 'Sending Reset Link...' : 'Send Reset Link' }}
    </button>
    <div *ngIf="error" class="error">{{ error }}</div>
    <div class="auth-links">
      <a routerLink="/auth/login" class="back-link">← Back to Login</a>
      <span class="divider">|</span>
      <a routerLink="/auth/register">Create Account</a>
    </div>
  </form>
  <div *ngIf="emailSent" class="success-container">
    <div class="success-icon">📧</div>
    <h2>Reset Link Sent!</h2>
    <div class="success-message">
      <p>{{ message }}</p>
    </div>
    
    <div class="email-info">
      <p><strong>What's next?</strong></p>
      <ul>
        <li>Check your email inbox (and spam folder)</li>
        <li>Click the reset link in the email</li>
        <li>Create a new password</li>
      </ul>
    </div>
    <div class="action-buttons">
      <button 
        type="button" 
        class="resend-btn" 
        (click)="resendResetEmail()"
        [disabled]="loading"
      >
        <span *ngIf="loading" class="spinner"></span>
        {{ loading ? 'Sending...' : 'Resend Reset Email' }}
      </button>
      <button type="button" class="login-btn" (click)="goToLogin()">
        Back to Login
      </button>
    </div>
    <div *ngIf="error" class="error">{{ error }}</div>
  </div>
</div>